<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spy Party 2077</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="bg-grid"></div>
  <div class="scanline"></div>

  <main class="main-container">
    <header class="cyber-header">
      <h1 class="glitch" data-text="SPY PARTY">SPY PARTY</h1>
      <div class="subtitle">NEURAL LINK ESTABLISHED</div>
    </header>

    <div class="content-wrapper">
      <section class="cyber-card" id="connCard">
        <div class="card-header">
          <h2><span class="icon">ðŸ”Œ</span> NETWORK STATUS</h2>
          <div class="status-badge">
            <span id="connDot" class="status-dot dot-bad"></span>
            <span id="connText">OFFLINE</span>
          </div>
        </div>

        <div class="card-body">
          <details class="cyber-details">
            <summary>NETWORK SETTINGS</summary>
            <div class="details-content">
              <div class="input-group">
                <label>SERVER UPLINK</label>
                <input id="serverUrl" type="text" value="wss://webrtc-signaling.mdsinalpha.click" class="cyber-input" />
              </div>
              <button id="connectBtn" class="cyber-btn primary full-width">RECONNECT</button>
            </div>
          </details>

          <div class="divider"><span>MISSION SETUP</span></div>

          <div class="input-group">
            <label>CODENAME</label>
            <input id="nameInput" type="text" maxlength="18" placeholder="YOUR NAME" class="cyber-input" />
          </div>

          <div class="input-group">
            <label>ACCESS CODE</label>
            <div class="row-inputs">
              <input id="gameCodeInput" type="text" placeholder="AUTO-GEN IF EMPTY" class="cyber-input" />
              <div class="btn-group">
                <button id="joinBtn" class="cyber-btn">JOIN</button>
                <button id="createBtn" class="cyber-btn">CREATE</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="cyber-card hidden" id="lobbyCard">
        <div class="card-header">
          <h2><span class="icon">ðŸ‘¥</span> LOBBY <span id="codeValue" class="code-display">---</span></h2>
          <div class="header-actions">
            <button id="copyCodeBtn" class="cyber-btn small">COPY CODE</button>
            <div class="phase-badge">PHASE: <span id="phaseText">LOBBY</span></div>
          </div>
        </div>

        <div class="card-body">
          <div id="leaderPanel" class="settings-panel hidden">
            <details class="cyber-details">
              <summary>MISSION PARAMETERS</summary>
              <div class="details-content">
                <div class="input-group">
                  <label>NUMBER OF SPIES</label>
                  <input id="numSpiesInput" type="number" min="1" value="1" class="cyber-input" />
                </div>
                <div class="input-group">
                  <label>ROUND DURATION (SEC)</label>
                  <input id="roundSecondsInput" type="number" min="30" max="600" value="60" class="cyber-input" />
                </div>
                <div class="input-group">
                  <label>SECRET WORDS (DB)</label>
                  <textarea id="wordsInput" class="cyber-input" placeholder="cafe&#10;beach&#10;library"></textarea>
                </div>
              </div>
            </details>
            <button id="startBtn" class="cyber-btn primary full-width mt-4">EXECUTE MISSION</button>
          </div>

          <div class="list-header">OPERATIVES</div>
          <div class="player-list" id="playersList"></div>

          <div class="divider"></div>

          <div id="rolePanel" class="role-panel hidden">
            <div class="role-card">
              <div class="role-label">YOUR ASSIGNMENT</div>
              <div id="roleText" class="role-reveal glitch-text">---</div>
              <div id="roleInstruction" class="role-sub">---</div>
            </div>

            <div class="action-area">
              <button id="confirmBtn" class="cyber-btn primary large">CONFIRM READY</button>
              <div class="ready-status">
                <span id="confirmCount">0</span> / <span id="totalPlayers">0</span> OPERATIVES READY
              </div>
              <button id="forceStartBtn" class="cyber-btn danger hidden">FORCE START</button>
            </div>
          </div>

          <div id="timerPanel" class="timer-panel hidden">
            <div id="timerContainer" class="timer-display">
              <div class="timer-label">TIME REMAINING</div>
              <div id="timerDisplay" class="timer-digits">00:00</div>
              <div class="timer-sub">IDENTIFY THE SPY</div>
              <button id="finishBtn" class="cyber-btn warning hidden">ABORT MISSION</button>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="cyber-footer">
    <div class="footer-text">SYSTEM VERSION 2.0 // DESIGN BY MOHSEN</div>
  </footer>

  <script src="rtc-client.umd.js"></script>
  <script src="util.js"></script>
  <script src="connection.js"></script>
  <script src="lobby.js"></script>
  <script src="game.js"></script>
  <script src="timer.js"></script>
  <script src="app.js"></script>
</body>

</html>